<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARAM Mayhem 台版增幅速查表（CSP 安心版）</title>
  <meta name="description" content="英雄聯盟 ARAM: Mayhem 增幅（Augments）台版譯名速查表與建議。就算停用 JavaScript 也能顯示增幅；啟用後提供英雄清單與互動功能。">
  <style>
    :root{
      --bg:#0b1020; --bg2:#0f1430;
      --card:#0e1631; --card2:#0b142b;
      --line:#223056; --line2:#2d3c6b;
      --txt:#e7eeff; --muted:#9bb1da;
      --accent:#00e0ff; --accent2:#ff3d78; --accent3:#7c4dff;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--txt);
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(124,77,255,.16), transparent 60%),
        radial-gradient(900px 500px at 85% 15%, rgba(0,224,255,.16), transparent 60%),
        linear-gradient(180deg, #0b1020 0%, #0b1124 60%, #0b1020 100%);
      font: 14px/1.65 system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "PingFang TC", "Heiti TC", "Microsoft JhengHei", sans-serif;
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    header{
      position:sticky; top:0; z-index:20;
      background: rgba(11,16,32,.8);
      border-bottom:1px solid var(--line);
      backdrop-filter: blur(8px);
    }
    .wrap{max-width:1120px; margin:0 auto; padding:12px 16px}
    h1{font-size: clamp(18px, 2.6vw, 28px); margin:0 0 2px; letter-spacing:.3px}
    .sub{color:var(--muted); font-size:12px}
    .row{display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap}
    .btn{
      border:1px solid var(--line); background:#0c142e; color:var(--txt);
      padding:10px 14px; border-radius:12px; cursor:pointer; min-height:44px;
      box-shadow:0 2px 10px rgba(0,224,255,.08);
    }
    .btn:hover{border-color:var(--accent); box-shadow:0 4px 18px rgba(0,224,255,.18)}
    .page{display:grid; grid-template-columns:1fr; gap:16px; margin:14px auto}
    @media (min-width: 1024px){ .page{grid-template-columns: 360px 1fr}}
    .card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(16,22,55,.9), rgba(10,14,30,.9));
      border-radius: var(--radius);
      box-shadow: 0 10px 28px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.03);
    }
    .pad{padding:14px}
    .section-title{font-weight:700; letter-spacing:.2px; margin:0 0 10px}
    .tip{color:var(--muted); font-size:12px}
    .field{display:block; width:100%; padding:12px; border-radius:12px; border:1px solid var(--line); background:#0c142e; color:var(--txt)}
    .accent-line{height:1px; background:linear-gradient(90deg, transparent, var(--accent), transparent); margin:10px 0 12px}

    .role-list{display:grid; grid-template-columns:1fr; gap:10px}
    .role-chip{border:1px solid var(--line); border-radius:14px; padding:10px; background: linear-gradient(180deg, #101a40, #0d1635); min-height:44px}
    .role-chip a{color:var(--txt); text-decoration:none; font-weight:700; display:block}

    .hero-grid{display:grid; gap:10px; grid-template-columns: repeat(auto-fill, minmax(104px, 1fr))}
    .hero{display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center; border:1px solid var(--line); border-radius:12px; padding:10px; background:#0b132b}
    .hero img{width:80px; aspect-ratio:1/1; border-radius:10px; display:block; background:#0d1838; object-fit:cover}
    .hero .nm{font-size:12px; line-height:1.2; word-break:break-word}
    .hero .en{font-size:10px; color:var(--muted)}

    .rounds{display:grid; gap:16px}
    .badge{display:inline-flex; align-items:center; gap:6px; border:1px solid var(--line2); padding:3px 8px; border-radius:999px; font-size:11px; color:#cfe2ff}
    .silver{background:linear-gradient(180deg, #18243e,#131b33)}
    .gold{background:linear-gradient(180deg, #3a300f,#241d09); color:#ffe39e; border-color:#6b5418}
    .prismatic{background:linear-gradient(180deg, #2b1640,#170b2b); color:#ead4ff; border-color:#6b2aaa}

    /* 每輪的增幅網格：固定位置、高度一致 */
    .round-card .picks{
      display:grid; gap:10px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      align-items: stretch;
    }
    .pick{
      border:1px solid var(--line); background:#0c142e; border-radius:12px; padding:10px;
      display:grid; grid-template-rows:auto 1fr; min-height:86px;
    }
    .pick .head{display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap}
    .pick .tw{font-weight:700; word-break:break-word}
    .tt{position:relative}
    .ttip{position:absolute; left:50%; top:100%; transform: translate(-50%, 8px); opacity:0; transition:opacity .12s ease, transform .12s ease;
      background:#000; color:#fff; font-size:11px; border-radius:6px; padding:4px 6px; z-index:30; max-width:280px; white-space:nowrap; pointer-events:none}
    .tt:hover .ttip{opacity:1; transform: translate(-50%, 4px)}

    footer{color:#9bb1da; font-size:11px; text-align:center; padding:16px 0 32px}
    footer a{color:var(--accent); text-decoration:none}
    footer a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <div>
        <h1>ARAM Mayhem 台版增幅速查表（CSP 安心版）</h1>
        <div class="sub">就算停用 JavaScript 也能顯示：增幅卡片已預渲染；啟用後提供英雄清單與互動</div>
      </div>
      <div class="row" style="gap:8px">
        <button class="btn" id="copyBtn">複製當前方案</button>
        <button class="btn" id="exportBtn">匯出 JSON</button>
      </div>
    </div>
  </header>

  <main class="wrap page">
    <!-- 左側：類型（純 HTML 連結；無 JS 也可跳到該段） -->
    <aside class="card pad">
      <div class="section-title">選擇英雄類型（無 JS 版）</div>
      <div class="role-list" id="roleListNoJS">
        <div class="role-chip"><a href="#role-mage">法師 Mage</a></div>
        <div class="role-chip"><a href="#role-assassin">刺客 Assassin</a></div>
        <div class="role-chip"><a href="#role-tank">坦克 / 肉 Bruiser</a></div>
        <div class="role-chip"><a href="#role-adc">射手 Marksman</a></div>
        <div class="role-chip"><a href="#role-support">輔助 Enchanter</a></div>
        <div class="role-chip"><a href="#role-fighter">鬥士 Fighter</a></div>
      </div>

      <div class="accent-line"></div>

      <div class="section-title">快速選英雄（需 JS；未啟用時僅顯示提示）</div>
      <input class="field" id="search" placeholder="輸入英雄名稱…（例：拉克絲、Zed）" />
      <div class="accent-line"></div>
      <div class="hero-grid" id="heroGrid" aria-live="polite">
        <div class="tip">（若看不到英雄清單，代表你的環境停用了 JavaScript 或 CSP 禁止腳本，這不影響右側增幅顯示）</div>
      </div>
    </aside>

    <!-- 右側：方案（預設已用 HTML 預渲染「法師 Mage」四輪；可直接看到） -->
    <section class="rounds">
      <div class="card pad">
        <div class="row">
          <div>
            <div class="tip">目前方案</div>
            <div id="currentPlanTitle" style="font-size:20px; font-weight:800">法師 Mage｜拉克絲（範例）</div>
          </div>
          <div class="row" style="gap:6px">
            <span class="badge silver">SILVER</span>
            <span class="badge gold">GOLD</span>
            <span class="badge prismatic">PRISMATIC</span>
          </div>
        </div>
      </div>

      <!-- ✅ 預渲染：法師（Mage）四輪，無 JS 也能顯示在正確位置 -->
      <div id="role-mage" class="card pad round-card">
        <div class="row" style="margin-bottom:8px">
          <div class="section-title">Round 1（建議：銀）</div>
          <div><span class="badge silver">SILVER</span></div>
        </div>
        <div class="picks">
          <div class="pick"><div class="head"><div class="tt"><span class="tw">AD 轉術</span><div class="ttip">ADAPt</div></div><span class="badge silver">SILVER</span></div><div class="tip">AD→AP 混傷加成 + 額外 AP</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">術力滿點</span><div class="ttip">Witchful Thinking</div></div><span class="badge silver">SILVER</span></div><div class="tip">+AP（20~80）</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">霜魂幽縛</span><div class="ttip">Frost Wraith</div></div><span class="badge silver">SILVER</span></div><div class="tip">每 6.5 秒對近敵定根</div></div>
        </div>
      </div>

      <div class="card pad round-card" id="role-mage-r2">
        <div class="row" style="margin-bottom:8px">
          <div class="section-title">Round 2（建議：金）</div>
          <div><span class="badge gold">GOLD</span></div>
        </div>
        <div class="picks">
          <div class="pick"><div class="head"><div class="tt"><span class="tw">魔法導彈</span><div class="ttip">Magic Missile</div></div><span class="badge gold">GOLD</span></div><div class="tip">技能命中發出 3 枚魔彈，依最大 HP 真傷</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">遞歸冷卻</span><div class="ttip">Recursion</div></div><span class="badge gold">GOLD</span></div><div class="tip">+60 技能急速</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">腳程加速</span><div class="ttip">With Haste</div></div><span class="badge gold">GOLD</span></div><div class="tip">依技能急速轉移速</div></div>
        </div>
      </div>

      <div class="card pad round-card" id="role-mage-r3">
        <div class="row" style="margin-bottom:8px">
          <div class="section-title">Round 3（金 / 棱彩）</div>
          <div><span class="badge gold">GOLD</span> <span class="badge prismatic">PRISMATIC</span></div>
        </div>
        <div class="picks">
          <div class="pick"><div class="head"><div class="tt"><span class="tw">寶石手套</span><div class="ttip">Jeweled Gauntlet</div></div><span class="badge prismatic">PRISMATIC</span></div><div class="tip">法術可暴擊並提高爆傷</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">煉獄導管</span><div class="ttip">Infernal Conduit</div></div><span class="badge prismatic">PRISMATIC</span></div><div class="tip">技能灼燒可疊，灼燒縮短冷卻</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">究極甦醒</span><div class="ttip">Ultimate Awakening</div></div><span class="badge prismatic">PRISMATIC</span></div><div class="tip">放大後重置所有小技能</div></div>
        </div>
      </div>

      <div class="card pad round-card" id="role-mage-r4">
        <div class="row" style="margin-bottom:8px">
          <div class="section-title">Round 4（棱彩）</div>
          <div><span class="badge prismatic">PRISMATIC</span></div>
        </div>
        <div class="picks">
          <div class="pick"><div class="head"><div class="tt"><span class="tw">量子運算</span><div class="ttip">Quantum Computing</div></div><span class="badge prismatic">PRISMATIC</span></div><div class="tip">每 30 秒自動釋放大範圍斬擊</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">回歸基礎</span><div class="ttip">Back to Basics</div></div><span class="badge prismatic">PRISMATIC</span></div><div class="tip">封大；+35% 技能傷/治/盾 與 +70AH</div></div>
          <div class="pick"><div class="head"><div class="tt"><span class="tw">最終形態</span><div class="ttip">Final Form</div></div><span class="badge prismatic">PRISMATIC</span></div><div class="tip">放大後護盾 / 全能吸血 / 移速</div></div>
        </div>
      </div>

      <!-- ⬇️ 預留錨點（無 JS 時可卷動到此；有 JS 會覆寫內容） -->
      <div id="role-assassin"></div>
      <div id="role-tank"></div>
      <div id="role-adc"></div>
      <div id="role-support"></div>
      <div id="role-fighter"></div>
    </section>
  </main>

  <footer>
    資料僅供參考；實裝以遊戲內為準。來源：Mobalytics、OP.GG、Riot Data Dragon。<br/>
    肚府遊戲群DC：
    <a href="https://discord.gg/C9vkSAZmPT" target="_blank" rel="noopener">discord.gg/C9vkSAZmPT</a>
    ｜ 專案作者：
    <a href="https://blessliao.25min.co/" target="_blank" rel="noopener">廖天佑 Bless Liao</a>
  </footer>

  <!-- ===== JS 增強（若 CSP 擋掉，純 HTML 仍可看） ===== -->
  <script>
  // 1) 角色、增幅資料（節錄：與你前版一致；名稱顯示優先使用台版常見譯名）
  const OFFICIAL_TW = {
    "Transmute: Prismatic":"質變：稜鏡","Transmute: Gold":"質變：金級","Transmute: Chaos":"質變：大混亂",
    "Jeweled Gauntlet":"寶石手套","Thread the Needle":"穿針引線","Goliath":"巨人","Giant Slayer":"巨人殺手",
    "Marksmage":"射手法師","Scoped Weapons":"狙擊武器","Scopier Weapons":"超狙武器","Scopiest Weapons":"頂狙武器",
    "Lightning Strikes":"電光石火","Magic Missile":"魔法導彈","Typhoon":"颱風","Dual Wield":"雙持射擊",
    "Fan the Hammer":"連轟扳機","Goldrend":"淘金者","Gash":"裂甲真傷",
    "Celestial Body":"天界之身","Courage of the Colossus":"巨像勇氣","Adamant":"剛毅","Shrink Ray":"縮小光線",
    "Veil of Warding":"驅咒之幕","Perseverance":"堅忍不拔","Tank Engine":"坦克引擎","Back to Basics":"回歸基礎",
    "Unkillable Demon King":"不死魔王",
    "Holy Fire":"聖焰灼身","Infernal Conduit":"煉獄導管","Soul Siphon":"靈魂虹吸","Symphony of War":"戰爭交響曲",
    "Ethereal Weapon":"以太武裝","Windspeaker's Blessing":"風語者的祝福","Spiritual Purification":"靈能淨化","Searing Dawn":"曙光灼燒",
    "With Haste":"腳程加速","Leg Day":"腿部訓練日","Flashy":"閃現達人","Snowball Upgrade":"雪球升級",
    "Biggest Snowball Ever":"巨無霸雪球","Fetch":"你丟我撿","Shadow Runner":"影行者","Swift and Safe":"疾衝護身",
    "All for You":"全力支援","Executioner":"處決者","It's Critical":"就是要爆","It's Killing Time":"殺戮時間","From Beginning to End":"始終如一",
    "Minionmancer":"傀儡增幅","Rabble Rousing":"群起鬥毆","Restless Restoration":"移動療癒","Overflow":"溢流",
    "Skilled Sniper":"神射手訓練","Slow and Steady":"慢即是穩","Snowball Roulette":"雪球輪盤","Stats on Stats!":"疊上加疊！",
    "Quest: Steel Your Heart":"任務：心鋼起來","Quest: Wooglet’s Witchcap":"任務：烏莉特的法帽","Quest: Urf’s Champion":"任務：阿福英雄",
    "King Me":"封我為王",
    "Baby Kitty":"黏踢踢寶貓","Blade Waltz":"劍舞","Can't Touch This":"別碰我","Circle of Death":"死亡環",
    "Clown College":"小丑學院","Cruelty":"無情","Dashing":"縱躍專精","Draw Your Sword":"拔劍吧",
    "Empyrean Promise":"天墜護佑","Eureka":"靈光一現","Feel the Burn":"群體引燃","Fey Magic":"妖精魔法",
    "Final Form":"最終形態","Glass Cannon":"玻璃大砲","Laser Heal":"治療雷射","Mad Scientist":"瘋狂科學家",
    "Master of Duality":"雙修大師","Mystic Punch":"秘拳","Ominous Pact":"不祥之約",
    "Omni Soul":"萬魂加持","Protein Shake":"蛋白奶昔","Quantum Computing":"量子運算","Raid Boss":"團戰首領",
    "Scopiest Weapons":"最神射","Slow Cooker":"慢燉之火","Spirit Link":"靈魂連結","Tap Dancer":"踢踏舞",
    "Ultimate Awakening":"究極甦醒","Ultimate Revolution":"究極輪迴","Upgrade Mikael’s Blessing":"升級米凱爾",
    "Wisdom of Ages":"歲月智慧"
  };
  const AUGMENTS = [
    {en:'ADAPt',tw:'AD 轉術',tier:'silver',note:'AD→AP 混傷加成 + 額外 AP'},
    {en:'Witchful Thinking',tw:'術力滿點',tier:'silver',note:'+AP（20~80）'},
    {en:'Frost Wraith',tw:'霜魂幽縛',tier:'silver',note:'每 6.5 秒對近敵定根'},
    {en:'Magic Missile',tw:'魔彈齊發',tier:'gold',note:'技能命中發出 3 枚魔彈，依最大 HP 真傷'},
    {en:'Recursion',tw:'遞歸冷卻',tier:'gold',note:'+60 技能急速'},
    {en:'With Haste',tw:'疾步如飛',tier:'gold',note:'依技能急速轉移速'},
    {en:'Jeweled Gauntlet',tw:'珠寶手套',tier:'prismatic',note:'法術可暴擊並提高爆傷'},
    {en:'Infernal Conduit',tw:'煉獄導管',tier:'prismatic',note:'技能灼燒可疊，灼燒縮短冷卻'},
    {en:'Ultimate Awakening',tw:'究極甦醒',tier:'prismatic',note:'放大後重置所有小技能'},
    {en:'Quantum Computing',tw:'量子運算',tier:'prismatic',note:'每 30 秒自動釋放大範圍斬擊'},
    {en:'Back to Basics',tw:'回歸基礎',tier:'prismatic',note:'封大；+35% 技能傷/治/盾 與 +70AH'},
    {en:'Final Form',tw:'最終形態',tier:'prismatic',note:'放大後護盾 / 全能吸血 / 移速'},

    {en:'Shadow Runner',tw:'影行者',tier:'silver',note:'位移/脫隱後 +300 移速'},
    {en:'Swift and Safe',tw:'疾衝護身',tier:'silver',note:'位移後獲護盾（短 CD）'},
    {en:'The Brutalizer',tw:'殘暴者',tier:'silver',note:'+AD +AH +穿甲'},
    {en:'Flashy',tw:'閃現達人',tier:'gold',note:'閃現改為彈藥制，CD 短'},
    {en:'Executioner',tw:'處決者',tier:'gold',note:'對 30% 以下增傷；擊殺退小技'},
    {en:"It's Killing Time",tw:'屠戮時刻',tier:'gold',note:'放大標記蓄傷；5 秒引爆'},
    {en:'Blade Waltz',tw:'劍舞',tier:'prismatic',note:'無目標連斬並短暫無敵'},
    {en:'Dashing',tw:'縱躍專精',tier:'prismatic',note:'位移類技能 +175AH'},
    {en:"Can't Touch This",tw:'別碰我',tier:'prismatic',note:'放大獲 2 秒無敵'},
    {en:'Glass Cannon',tw:'玻璃大砲',tier:'prismatic',note:'-30% 最大 HP；+12% 真傷'},
    {en:'Giant Slayer',tw:'巨人殺手',tier:'prismatic',note:'變小加速；對大型敵人增傷'},

    {en:'Adamant',tw:'剛毅',tier:'silver',note:'定身疊雙抗'},
    {en:'Tank It or Leave It',tw:'要坦就坦',tier:'silver',note:'暴擊轉格擋；觸發 20% 減傷'},
    {en:'Mighty Shield',tw:'護盾激勵',tier:'silver',note:'獲盾短暫 +自適應力'},
    {en:'Perseverance',tw:'堅忍不拔',tier:'gold',note:'巨幅生命回復；殘血更高'},
    {en:"Dawnbringer's Resolve",tw:'黎明守護',tier:'gold',note:'半血觸發大治療'},
    {en:'Tank Engine',tw:'坦克引擎',tier:'gold',note:'擊殺疊體型 / 最大 HP'},
    {en:'Courage of the Colossus',tw:'巨像之勇',tier:'prismatic',note:'定身後獲大護盾'},
    {en:'Goliath',tw:'巨靈化身',tier:'prismatic',note:'+體型 +HP +自適應力'},
    {en:'Protein Shake',tw:'蛋白奶昔',tier:'prismatic',note:'治癒依雙抗提升'},
    {en:'Omni Soul',tw:'萬魂加持',tier:'prismatic',note:'一次獲得 3 龍魂'}
  ];

  const ROLE_PLANS = {
    mage: [
      {label:'Round 1（建議：銀）', picks:['ADAPt','Witchful Thinking','Frost Wraith']},
      {label:'Round 2（建議：金）', picks:['Magic Missile','Recursion','With Haste']},
      {label:'Round 3（金 / 棱彩）', picks:['Jeweled Gauntlet','Infernal Conduit','Ultimate Awakening']},
      {label:'Round 4（棱彩）', picks:['Quantum Computing','Back to Basics','Final Form']},
    ],
    assassin: [
      {label:'Round 1（建議：銀）', picks:['Shadow Runner','Swift and Safe','The Brutalizer']},
      {label:'Round 2（建議：金）', picks:['Flashy','Executioner',"It's Killing Time"]},
      {label:'Round 3（金 / 棱彩）', picks:['Blade Waltz','Dashing','Final Form']},
      {label:'Round 4（棱彩）', picks:["Can't Touch This",'Glass Cannon','Giant Slayer']},
    ],
    tank: [
      {label:'Round 1（建議：銀）', picks:['Adamant','Tank It or Leave It','Mighty Shield']},
      {label:'Round 2（建議：金）', picks:['Perseverance',"Dawnbringer's Resolve",'Tank Engine']},
      {label:'Round 3（金 / 棱彩）', picks:['Courage of the Colossus','Goliath','Protein Shake']},
      {label:'Round 4（棱彩）', picks:['Back to Basics','Omni Soul','Final Form']},
    ],
    adc: [
      {label:'Round 1（建議：銀）', picks:['Deft','Scoped Weapons','Typhoon']},
      {label:'Round 2（建議：金）', picks:['Critical Rhythm',"It's Critical",'Thread the Needle']},
      {label:'Round 3（金 / 棱彩）', picks:['Dual Wield','Fan the Hammer','Goldrend']},
      {label:'Round 4（棱彩）', picks:['Giant Slayer','Glass Cannon','Final Form']},
    ],
    support: [
      {label:'Round 1（建議：銀）', picks:['First Aid Kit','Virtuous Cycle','Sonic Boom']},
      {label:'Round 2（建議：金）', picks:['All for You','Holy Fire','Keystone Conjurer']},
      {label:'Round 3（金 / 棱彩）', picks:['Empyrean Promise','Divine Intervention',"Windspeaker's Blessing"]},
      {label:'Round 4（棱彩）', picks:["Windspeaker's Blessing",'Final Form','Omni Soul']},
    ],
    fighter: [
      {label:'Round 1（建議：銀）', picks:['Adamant','The Brutalizer','Mighty Shield']},
      {label:'Round 2（建議：金）', picks:['Perseverance','Executioner','Tank Engine']},
      {label:'Round 3（金 / 棱彩）', picks:['Courage of the Colossus','Goliath','Final Form']},
      {label:'Round 4（棱彩）', picks:['Back to Basics','Omni Soul','Final Form']},
    ],
  };

  // 2) JS 增強：若 CSP 允許執行，以下功能啟用（不影響純 HTML 顯示）
  const $title = document.getElementById('currentPlanTitle');
  const $rounds = document.querySelector('section.rounds');

  function findAug(en){ return AUGMENTS.find(a=>a.en===en) || {en,tw:en,tier:'silver',note:''}; }
  const badge = t => t==='gold' ? '<span class="badge gold">GOLD</span>' : (t==='prismatic' ? '<span class="badge prismatic">PRISMATIC</span>' : '<span class="badge silver">SILVER</span>');
  const showName = (en,tw)=> OFFICIAL_TW[en] || tw;

  function renderByRole(roleLabelZh, roleKey){
    const flow = ROLE_PLANS[roleKey];
    if(!flow) return;
    // 保留第一張「目前方案」卡，清掉其後全部
    const keep = $rounds.firstElementChild;
    $rounds.innerHTML = '';
    $rounds.appendChild(keep);

    $title.textContent = `${roleLabelZh}｜（選擇英雄後顯示）`;

    flow.forEach(round=>{
      const picks = round.picks.map(en=>findAug(en));
      const tiers = Array.from(new Set(picks.map(p=>p.tier)));
      const headBadges = tiers.map(t=>badge(t)).join(' ');

      const items = picks.map(a=>`
        <div class="pick">
          <div class="head">
            <div class="tt"><span class="tw">${showName(a.en,a.tw)}</span><div class="ttip">${a.en}</div></div>
            ${badge(a.tier)}
          </div>
          <div class="tip">${a.note||'— 暫無中文簡述 —'}</div>
        </div>
      `).join('');

      const card = document.createElement('div');
      card.className='card pad round-card';
      card.innerHTML = `
        <div class="row" style="margin-bottom:8px">
          <div class="section-title">${round.label}</div>
          <div>${headBadges}</div>
        </div>
        <div class="picks">${items}</div>
      `;
      $rounds.appendChild(card);
    });
  }

  // 2a) 啟用左側（無 JS 版是錨點，有 JS 後改抓 data-role）
  (function enhanceRoleNav(){
    const nav = document.getElementById('roleListNoJS');
    if(!nav) return;
    const map = {
      'role-mage':      {label:'法師 Mage', key:'mage'},
      'role-assassin':  {label:'刺客 Assassin', key:'assassin'},
      'role-tank':      {label:'坦克 / 肉 Bruiser', key:'tank'},
      'role-adc':       {label:'射手 Marksman', key:'adc'},
      'role-support':   {label:'輔助 Enchanter', key:'support'},
      'role-fighter':   {label:'鬥士 Fighter', key:'fighter'}
    };
    Array.from(nav.querySelectorAll('a[href^="#role-"]')).forEach(a=>{
      const id = a.getAttribute('href').slice(1);
      if(map[id]){
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          renderByRole(map[id].label, map[id].key);
          // 捲到方案起點
          window.scrollTo({top:document.querySelector('section.rounds').offsetTop - 60, behavior:'smooth'});
        });
      }
    });
  })();

  // 2b) 複製 / 匯出（若 CSP 擋腳本，按鈕無作用，但不影響顯示）
  document.getElementById('copyBtn').addEventListener('click', ()=>{
    const txt = Array.from($rounds.querySelectorAll('.round-card')).map(rc=>{
      const title = rc.querySelector('.section-title')?.textContent?.trim()||'';
      const picks = Array.from(rc.querySelectorAll('.pick .tw')).map(x=>x.textContent.trim()).join(' / ');
      return `- ${title}：${picks}`;
    });
    const final = `【ARAM Mayhem】增幅清單\n` + txt.join('\n');
    navigator.clipboard.writeText(final);
    const btn = document.getElementById('copyBtn'); btn.textContent='已複製'; setTimeout(()=>btn.textContent='複製當前方案',1200);
  });

  document.getElementById('exportBtn').addEventListener('click', ()=>{
    const blob = new Blob([JSON.stringify({officialTW:OFFICIAL_TW, augments:AUGMENTS, plans:ROLE_PLANS},null,2)],{type:'application/json'});
    const url = URL.createObjectURL(blob); const a=document.createElement('a');
    a.href=url; a.download='aram-mayhem.tw.json'; a.click(); URL.revokeObjectURL(url);
  });

  // 2c) 若 URL 本身帶錨點（#role-xxx），初始就渲染對應類型
  (function initFromHash(){
    const h = (location.hash||'').slice(1);
    const table = { 'role-mage':['法師 Mage','mage'], 'role-assassin':['刺客 Assassin','assassin'],
      'role-tank':['坦克 / 肉 Bruiser','tank'], 'role-adc':['射手 Marksman','adc'],
      'role-support':['輔助 Enchanter','support'], 'role-fighter':['鬥士 Fighter','fighter'] };
    if(table[h]){ renderByRole(table[h][0], table[h][1]); }
  })();
  </script>
</body>
</html>
