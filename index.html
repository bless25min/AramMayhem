<!doctype html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARAM Mayhem å°ç‰ˆå¢å¹…é€ŸæŸ¥è¡¨ï¼ˆç©©å®šç‰ˆï¼‰</title>
  <meta name="description" content="è‹±é›„è¯ç›Ÿ ARAM: Mayhem å¢å¹…ï¼ˆAugmentsï¼‰å°ç‰ˆè­¯åé€ŸæŸ¥è¡¨èˆ‡å»ºè­°ã€‚ç´”å‰ç«¯å–®æª”ï¼Œå¯ç›´æ¥éƒ¨ç½² GitHub Pages / Cloudflare Pagesã€‚">

  <style>
    :root{
      --bg:#0b1020; --bg2:#0f1430;
      --card:#0e1631; --card2:#0b142b;
      --line:#223056; --line2:#2d3c6b;
      --txt:#e7eeff; --muted:#9bb1da;
      --accent:#00e0ff; --accent2:#ff3d78; --accent3:#7c4dff;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--txt);
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(124,77,255,.16), transparent 60%),
        radial-gradient(900px 500px at 85% 15%, rgba(0,224,255,.16), transparent 60%),
        linear-gradient(180deg, #0b1020 0%, #0b1124 60%, #0b1020 100%);
      font: 14px/1.65 system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "PingFang TC", "Heiti TC", "Microsoft JhengHei", sans-serif;
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    header{
      position:sticky; top:0; z-index:20;
      background: rgba(11,16,32,.8);
      border-bottom:1px solid var(--line);
      backdrop-filter: blur(8px);
    }
    .wrap{max-width:1120px; margin:0 auto; padding:12px 16px}
    h1{font-size: clamp(18px, 2.6vw, 28px); margin:0 0 2px; letter-spacing:.3px}
    .sub{color:var(--muted); font-size:12px}
    .row{display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap}
    .btn{
      border:1px solid var(--line); background:#0c142e; color:var(--txt);
      padding:10px 14px; border-radius:12px; cursor:pointer; min-height:44px;
      box-shadow:0 2px 10px rgba(0,224,255,.08);
    }
    .btn:hover{border-color:var(--accent); box-shadow:0 4px 18px rgba(0,224,255,.18)}
    .page{display:grid; grid-template-columns:1fr; gap:16px; margin:14px auto}
    @media (min-width: 1024px){ .page{grid-template-columns: 360px 1fr}}
    .card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(16,22,55,.9), rgba(10,14,30,.9));
      border-radius: var(--radius);
      box-shadow: 0 10px 28px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.03);
    }
    .pad{padding:14px}
    .section-title{font-weight:700; letter-spacing:.2px; margin:0 0 10px}
    .tip{color:var(--muted); font-size:12px}
    .field{display:block; width:100%; padding:12px; border-radius:12px; border:1px solid var(--line); background:#0c142e; color:var(--txt)}
    .accent-line{height:1px; background:linear-gradient(90deg, transparent, var(--accent), transparent); margin:10px 0 12px}

    .role-list{display:grid; grid-template-columns:1fr; gap:10px}
    .role-chip{border:1px solid var(--line); border-radius:14px; padding:10px; background: linear-gradient(180deg, #101a40, #0d1635); cursor:pointer; min-height:44px}
    .role-chip.active{outline:2px solid var(--accent); box-shadow: 0 0 0 4px rgba(0,224,255,.12)}

    .hero-grid{display:grid; gap:10px; grid-template-columns: repeat(auto-fill, minmax(104px, 1fr))}
    .hero{display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center; border:1px solid var(--line); border-radius:12px; padding:10px; background:#0b132b; cursor:pointer}
    .hero:hover{border-color:var(--accent)}
    .hero img{width:80px; aspect-ratio:1/1; border-radius:10px; display:block; background:#0d1838; object-fit:cover}
    .hero .nm{font-size:12px; line-height:1.2; word-break:break-word}
    .hero .en{font-size:10px; color:var(--muted)}

    .rounds{display:grid; gap:16px}
    .badge{display:inline-flex; align-items:center; gap:6px; border:1px solid var(--line2); padding:3px 8px; border-radius:999px; font-size:11px; color:#cfe2ff}
    .silver{background:linear-gradient(180deg, #18243e,#131b33)}
    .gold{background:linear-gradient(180deg, #3a300f,#241d09); color:#ffe39e; border-color:#6b5418}
    .prismatic{background:linear-gradient(180deg, #2b1640,#170b2b); color:#ead4ff; border-color:#6b2aaa}

    /* æ¯è¼ªçš„å¢å¹…ç¶²æ ¼ï¼šä¸€å®šæ’å¥½ä¸”é«˜åº¦ä¸€è‡´ */
    .round-card .picks{
      display:grid; gap:10px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      align-items: stretch;
    }
    .pick{
      border:1px solid var(--line); background:#0c142e; border-radius:12px; padding:10px;
      display:grid; grid-template-rows:auto 1fr; min-height:86px;
    }
    .pick .head{display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap}
    .pick .tw{font-weight:700; word-break:break-word}
    .tt{position:relative}
    .ttip{position:absolute; left:50%; top:100%; transform: translate(-50%, 8px); opacity:0; transition:opacity .12s ease, transform .12s ease;
      background:#000; color:#fff; font-size:11px; border-radius:6px; padding:4px 6px; z-index:30; max-width:280px; white-space:nowrap; pointer-events:none}
    .tt:hover .ttip{opacity:1; transform: translate(-50%, 4px)}

    footer{color:#9bb1da; font-size:11px; text-align:center; padding:16px 0 32px}
    footer a{color:var(--accent); text-decoration:none}
    footer a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <div>
        <h1>ARAM Mayhem å°ç‰ˆå¢å¹…é€ŸæŸ¥è¡¨ï¼ˆç©©å®šç‰ˆï¼‰</h1>
        <div class="sub">å…¨è‹±é›„ï¼ˆç¹ä¸­åï¼‹ç¸®åœ–ï¼‰ï¼å…¨å¢å¹…ï¼ˆå°ç‰ˆè­¯åå„ªå…ˆï¼‹è‹±å tooltipï¼‰ï¼è¡Œå‹•å„ªåŒ–</div>
      </div>
      <div class="row" style="gap:8px">
        <button class="btn" id="copyBtn">è¤‡è£½ç•¶å‰æ–¹æ¡ˆ</button>
        <button class="btn" id="exportBtn">åŒ¯å‡º JSON</button>
      </div>
    </div>
  </header>

  <main class="wrap page">
    <!-- å·¦å´ï¼šé¡å‹ã€æœå°‹ã€å…¨è‹±é›„ -->
    <aside class="card pad">
      <div class="section-title">é¸æ“‡è‹±é›„é¡å‹</div>
      <div class="role-list" id="roleList"></div>

      <div class="accent-line"></div>

      <div class="section-title">å¿«é€Ÿé¸è‹±é›„</div>
      <input class="field" id="search" placeholder="è¼¸å…¥è‹±é›„åç¨±â€¦ï¼ˆä¾‹ï¼šæ‹‰å…‹çµ²ã€Zedï¼‰" />
      <div class="accent-line"></div>
      <div class="hero-grid" id="heroGrid" aria-live="polite"></div>

      <div class="accent-line"></div>
      <div class="tip">
        â€¢ è‹±é›„ç¹ä¸­åè‡ª Riot Data Dragonï¼ˆè‡ªå‹•æŠ“æœ€æ–°ç‰ˆï¼‰<br/>
        â€¢ ç¸®åœ–å„ªå…ˆ OP.GGï¼Œå¤±æ•—é€€å› DDragon<br/>
        â€¢ å¢å¹…åç¨±ä»¥å®˜æ–¹ï¼é€šè¡Œè­¯åç‚ºä¸»ï¼Œç„¡å°ç…§å‰‡é¡¯ç¤ºæš«è­¯ï¼›è‹±åå¯æ‡¸æµ®æª¢è¦–<br/>
        â€¢ ç¬¬ 3 è¼ªå¯èƒ½ç‚ºé‡‘ï¼æ£±å½©ï¼›ä¾å€™é¸å½ˆæ€§å–æ¨
      </div>
    </aside>

    <!-- å³å´ï¼šæ–¹æ¡ˆ -->
    <section class="rounds">
      <div class="card pad">
        <div class="row">
          <div>
            <div class="tip">ç›®å‰æ–¹æ¡ˆ</div>
            <div id="currentPlanTitle" style="font-size:20px; font-weight:800">â€”</div>
          </div>
          <div class="row" style="gap:6px">
            <span class="badge silver">SILVER</span>
            <span class="badge gold">GOLD</span>
            <span class="badge prismatic">PRISMATIC</span>
          </div>
        </div>
      </div>

      <div id="rounds" class="rounds"></div>
    </section>
  </main>

  <footer>
    è³‡æ–™åƒ…ä¾›åƒè€ƒï¼›å¯¦è£ä»¥éŠæˆ²å…§ç‚ºæº–ã€‚ä¾†æºï¼šMobalyticsã€OP.GGã€Riot Data Dragonã€‚<br/>
    è‚šåºœéŠæˆ²ç¾¤DCï¼š
    <a href="https://discord.gg/C9vkSAZmPT" target="_blank" rel="noopener">discord.gg/C9vkSAZmPT</a>
    ï½œ å°ˆæ¡ˆä½œè€…ï¼š
    <a href="https://blessliao.25min.co/" target="_blank" rel="noopener">å»–å¤©ä½‘ Bless Liao</a>
  </footer>

  <script>
  // ===== è§’è‰²å®šç¾© =====
  const ROLE_META = {
    mage:     { label:'æ³•å¸« Mage' },
    assassin: { label:'åˆºå®¢ Assassin' },
    tank:     { label:'å¦å…‹ / è‚‰ Bruiser' },
    adc:      { label:'å°„æ‰‹ Marksman' },
    support:  { label:'è¼”åŠ© Enchanter' },
    fighter:  { label:'é¬¥å£« Fighter' }, // é—œéµè£œä¸Š
  };
  const TAG2ROLE = { Mage:'mage', Assassin:'assassin', Tank:'tank', Marksman:'adc', Support:'support', Fighter:'fighter' };

  // ===== å®˜æ–¹/é€šè¡Œ å°ç‰ˆè­¯åï¼ˆè‹±â†’ç¹ï¼‰ =====
  const OFFICIAL_TW = {
    "Transmute: Prismatic":"è³ªè®Šï¼šç¨œé¡","Transmute: Gold":"è³ªè®Šï¼šé‡‘ç´š","Transmute: Chaos":"è³ªè®Šï¼šå¤§æ··äº‚",
    "Jeweled Gauntlet":"å¯¶çŸ³æ‰‹å¥—","Thread the Needle":"ç©¿é‡å¼•ç·š","Goliath":"å·¨äºº","Giant Slayer":"å·¨äººæ®ºæ‰‹",
    "Marksmage":"å°„æ‰‹æ³•å¸«","Scoped Weapons":"ç‹™æ“Šæ­¦å™¨","Scopier Weapons":"è¶…ç‹™æ­¦å™¨","Scopiest Weapons":"é ‚ç‹™æ­¦å™¨",
    "Lightning Strikes":"é›»å…‰çŸ³ç«","Magic Missile":"é­”æ³•å°å½ˆ","Typhoon":"é¢±é¢¨","Dual Wield":"é›™æŒå°„æ“Š",
    "Fan the Hammer":"é€£è½Ÿæ‰³æ©Ÿ","Goldrend":"æ·˜é‡‘è€…","Gash":"è£‚ç”²çœŸå‚·",
    "Celestial Body":"å¤©ç•Œä¹‹èº«","Courage of the Colossus":"å·¨åƒå‹‡æ°£","Adamant":"å‰›æ¯…","Shrink Ray":"ç¸®å°å…‰ç·š",
    "Veil of Warding":"é©…å’’ä¹‹å¹•","Perseverance":"å …å¿ä¸æ‹”","Tank Engine":"å¦å…‹å¼•æ“","Back to Basics":"å›æ­¸åŸºç¤",
    "Unkillable Demon King":"ä¸æ­»é­”ç‹",
    "Holy Fire":"è–ç„°ç¼èº«","Infernal Conduit":"ç…‰ç„å°ç®¡","Soul Siphon":"éˆé­‚è™¹å¸","Symphony of War":"æˆ°çˆ­äº¤éŸ¿æ›²",
    "Ethereal Weapon":"ä»¥å¤ªæ­¦è£","Windspeaker's Blessing":"é¢¨èªè€…çš„ç¥ç¦","Spiritual Purification":"éˆèƒ½æ·¨åŒ–","Searing Dawn":"æ›™å…‰ç¼ç‡’",
    "With Haste":"è…³ç¨‹åŠ é€Ÿ","Leg Day":"è…¿éƒ¨è¨“ç·´æ—¥","Flashy":"é–ƒç¾é”äºº","Snowball Upgrade":"é›ªçƒå‡ç´š",
    "Biggest Snowball Ever":"å·¨ç„¡éœ¸é›ªçƒ","Fetch":"ä½ ä¸Ÿæˆ‘æ’¿","Shadow Runner":"å½±è¡Œè€…","Swift and Safe":"ç–¾è¡è­·èº«",
    "All for You":"å…¨åŠ›æ”¯æ´","Executioner":"è™•æ±ºè€…","It's Critical":"å°±æ˜¯è¦çˆ†","It's Killing Time":"æ®ºæˆ®æ™‚é–“","From Beginning to End":"å§‹çµ‚å¦‚ä¸€",
    "Minionmancer":"å‚€å„¡å¢å¹…","Rabble Rousing":"ç¾¤èµ·é¬¥æ¯†","Restless Restoration":"ç§»å‹•ç™‚ç™’","Overflow":"æº¢æµ",
    "Skilled Sniper":"ç¥å°„æ‰‹è¨“ç·´","Slow and Steady":"æ…¢å³æ˜¯ç©©","Snowball Roulette":"é›ªçƒè¼ªç›¤","Stats on Stats!":"ç–Šä¸ŠåŠ ç–Šï¼",
    "Quest: Steel Your Heart":"ä»»å‹™ï¼šå¿ƒé‹¼èµ·ä¾†","Quest: Woogletâ€™s Witchcap":"ä»»å‹™ï¼šçƒè‰ç‰¹çš„æ³•å¸½","Quest: Urfâ€™s Champion":"ä»»å‹™ï¼šé˜¿ç¦è‹±é›„",
    "King Me":"å°æˆ‘ç‚ºç‹",
    "Baby Kitty":"é»è¸¢è¸¢å¯¶è²“","Blade Waltz":"åŠèˆ","Can't Touch This":"åˆ¥ç¢°æˆ‘","Circle of Death":"æ­»äº¡ç’°",
    "Clown College":"å°ä¸‘å­¸é™¢","Cruelty":"ç„¡æƒ…","Dashing":"ç¸±èºå°ˆç²¾","Draw Your Sword":"æ‹”åŠå§",
    "Empyrean Promise":"å¤©å¢œè­·ä½‘","Eureka":"éˆå…‰ä¸€ç¾","Feel the Burn":"ç¾¤é«”å¼•ç‡ƒ","Fey Magic":"å¦–ç²¾é­”æ³•",
    "Final Form":"æœ€çµ‚å½¢æ…‹","Glass Cannon":"ç»ç’ƒå¤§ç ²","Laser Heal":"æ²»ç™‚é›·å°„","Mad Scientist":"ç˜‹ç‹‚ç§‘å­¸å®¶",
    "Master of Duality":"é›™ä¿®å¤§å¸«","Mystic Punch":"ç§˜æ‹³","Ominous Pact":"ä¸ç¥¥ä¹‹ç´„",
    "Omni Soul":"è¬é­‚åŠ æŒ","Protein Shake":"è›‹ç™½å¥¶æ˜”","Quantum Computing":"é‡å­é‹ç®—","Raid Boss":"åœ˜æˆ°é¦–é ˜",
    "Scopiest Weapons":"æœ€ç¥å°„","Slow Cooker":"æ…¢ç‡‰ä¹‹ç«","Spirit Link":"éˆé­‚é€£çµ","Tap Dancer":"è¸¢è¸èˆ",
    "Ultimate Awakening":"ç©¶æ¥µç”¦é†’","Ultimate Revolution":"ç©¶æ¥µè¼ªè¿´","Upgrade Mikaelâ€™s Blessing":"å‡ç´šç±³å‡±çˆ¾",
    "Wisdom of Ages":"æ­²æœˆæ™ºæ…§"
  };

  // ===== å¢å¹…ï¼ˆé¡¯ç¤ºæ™‚æœƒå…ˆç”¨ OFFICIAL_TWï¼›æ‰¾ä¸åˆ°å†ç”¨ twï¼‰ =====
  const AUGMENTS = [
    // Silver
    {en:'ADAPt',               tw:'AD è½‰è¡“',       tier:'silver',  note:'ADâ†’AP æ··å‚·åŠ æˆ + é¡å¤– AP'},
    {en:'Witchful Thinking',   tw:'è¡“åŠ›æ»¿é»',       tier:'silver',  note:'+APï¼ˆ20~80ï¼‰'},
    {en:'Frost Wraith',        tw:'éœœé­‚å¹½ç¸›',       tier:'silver',  note:'æ¯ 6.5 ç§’å°è¿‘æ•µå®šæ ¹'},
    {en:'Shadow Runner',       tw:'å½±è¡Œè€…',         tier:'silver',  note:'ä½ç§»/è„«éš±å¾Œ +300 ç§»é€Ÿ'},
    {en:'Swift and Safe',      tw:'ç–¾è¡è­·èº«',       tier:'silver',  note:'ä½ç§»å¾Œç²è­·ç›¾ï¼ˆçŸ­ CDï¼‰'},
    {en:'The Brutalizer',      tw:'æ®˜æš´è€…',         tier:'silver',  note:'+AD +AH +ç©¿ç”²'},
    {en:'Adamant',             tw:'å‰›æ¯…',           tier:'silver',  note:'å®šèº«ç–Šé›™æŠ—'},
    {en:'Tank It or Leave It', tw:'è¦å¦å°±å¦',       tier:'silver',  note:'æš´æ“Šè½‰ç‚ºæ ¼æ“‹å¹¾ç‡ï¼Œè§¸ç™¼ 20% æ¸›å‚·'},
    {en:'Mighty Shield',       tw:'è­·ç›¾æ¿€å‹µ',       tier:'silver',  note:'ç²ç›¾å¾ŒçŸ­æ™‚é–“ +è‡ªé©æ‡‰åŠ›'},
    {en:'Deft',                tw:'èº«æ‰‹æ•æ·',       tier:'silver',  note:'+60% æ”»é€Ÿ'},
    {en:'Scoped Weapons',      tw:'ç‹™æ“Šæ­¦å™¨',       tier:'silver',  note:'+å°„ç¨‹ï¼ˆè¿‘+75/é +50ï¼‰'},
    {en:'Typhoon',             tw:'é¢±é¢¨',           tier:'silver',  note:'æ™®æ”»é¡å¤–å°„å‘å¦ä¸€ç›®æ¨™ä¸¦å¥— on-hit'},
    {en:'First Aid Kit',       tw:'æ€¥æ•‘åŒ…',         tier:'silver',  note:'æ²»ç™’/è­·ç›¾æ•ˆæœ +20%'},
    {en:'Virtuous Cycle',      tw:'å–„å¾ªç’°',         tier:'silver',  note:'æ²»â†’ç›¾ï¼ç›¾â†’æ²»ï¼ˆ+20%ï¼‰'},
    {en:'Sonic Boom',          tw:'éŸ³çˆ†å…±é³´',       tier:'silver',  note:'ä½ åŠ éšŠå‹æ™‚ï¼Œå‘¨é‚Šæ•µäººå—çœŸå‚·/ç·©é€Ÿ'},

    // Gold
    {en:'Magic Missile',       tw:'é­”å½ˆé½Šç™¼',       tier:'gold',    note:'æŠ€èƒ½å‘½ä¸­ç™¼å‡º 3 æšé­”å½ˆï¼Œä¾æœ€å¤§ HP çœŸå‚·'},
    {en:'Recursion',           tw:'éæ­¸å†·å»',       tier:'gold',    note:'+60 æŠ€èƒ½æ€¥é€Ÿ'},
    {en:'With Haste',          tw:'ç–¾æ­¥å¦‚é£›',       tier:'gold',    note:'ä¾æŠ€èƒ½æ€¥é€Ÿè½‰ç§»é€Ÿ'},
    {en:'Flashy',              tw:'é–ƒç¾é”äºº',       tier:'gold',    note:'é–ƒç¾æ”¹ç‚ºå½ˆè—¥åˆ¶ï¼ŒCD çŸ­'},
    {en:'Executioner',         tw:'è™•æ±ºè€…',         tier:'gold',    note:'å° 30% ä»¥ä¸‹å¢å‚·ï¼›æ“Šæ®ºé€€å°æŠ€'},
    {en:"It's Killing Time",   tw:'å± æˆ®æ™‚åˆ»',       tier:'gold',    note:'æ”¾å¤§æ¨™è¨˜è“„å‚·ï¼›5 ç§’å¼•çˆ†'},
    {en:'Perseverance',        tw:'å …å¿ä¸æ‹”',       tier:'gold',    note:'å·¨å¹…ç”Ÿå‘½å›å¾©ï¼›æ®˜è¡€æ›´é«˜'},
    {en:"Dawnbringer's Resolve",tw:'é»æ˜å®ˆè­·',      tier:'gold',    note:'åŠè¡€è§¸ç™¼å¤§æ²»ç™‚ï¼ˆæ­»å¾Œé‡ç½®ï¼‰'},
    {en:'Tank Engine',         tw:'å¦å…‹å¼•æ“',       tier:'gold',    note:'æ“Šæ®ºç–Šé«”å‹/æœ€å¤§ HPï¼ˆæ­»æ‰å±¤ï¼‰'},
    {en:'Critical Rhythm',     tw:'è‡´å‘½ç¯€å¥*',      tier:'gold',    note:'çˆ†æ“Šçµ¦æ”»é€Ÿï¼ˆå¯ç–Šï¼‰'},
    {en:"It's Critical",       tw:'å°±æ˜¯è¦çˆ†',       tier:'gold',    note:'æš´æ“Šç‡ 50%'},
    {en:'Thread the Needle',   tw:'ç©¿é›²è£‚ç”²',       tier:'gold',    note:'+18% ç©¿ç”²/ç©¿é­”'},
    {en:'All for You',         tw:'å…¨åŠ›æ”¯æ´',       tier:'gold',    note:'ä½ çµ¦éšŠå‹çš„æ²»/ç›¾ +30%'},
    {en:'Holy Fire',           tw:'è–ç„°ç¼èº«',       tier:'gold',    note:'æ²»/ç›¾æ™‚å°è¿‘æ•µç¼ç‡’ï¼ˆå¯ç–Šï¼‰'},
    {en:'Keystone Conjurer',   tw:'å¬å–šé›™ç¬¦',       tier:'gold',    note:'åŒæ™‚æ“æœ‰ Aery + Comet'},
    {en:'Divine Intervention', tw:'ç¥è–å¹²é ',       tier:'gold',    note:'é™æ˜Ÿå¹• 2.5 ç§’ç¯„åœç„¡æ•µï¼ˆCDï¼‰'},

    // Prismatic
    {en:'Jeweled Gauntlet',    tw:'ç å¯¶æ‰‹å¥—',       tier:'prismatic', note:'æ³•è¡“å¯æš´æ“Šä¸¦æé«˜çˆ†å‚·'},
    {en:'Infernal Conduit',    tw:'ç…‰ç„å°ç®¡',       tier:'prismatic', note:'æŠ€èƒ½æ–½åŠ ç„¡é™ç–Šç¼ç‡’ï¼Œç¼ç‡’ç¸®çŸ­å†·å»'},
    {en:'Ultimate Awakening',  tw:'ç©¶æ¥µç”¦é†’',       tier:'prismatic', note:'æ”¾å¤§å¾Œé‡ç½®æ‰€æœ‰å°æŠ€èƒ½'},
    {en:'Quantum Computing',   tw:'é‡å­é‹ç®—',       tier:'prismatic', note:'æ¯ 30 ç§’è‡ªå‹•é‡‹æ”¾å¤§ç¯„åœæ–¬æ“Š'},
    {en:'Back to Basics',      tw:'å›æ­¸åŸºç¤',       tier:'prismatic', note:'å°å¤§ï¼›+35% æŠ€èƒ½å‚·/æ²»/ç›¾èˆ‡ +70AH'},
    {en:'Final Form',          tw:'æœ€çµ‚å½¢æ…‹',       tier:'prismatic', note:'æ”¾å¤§å¾Œè­·ç›¾/å…¨èƒ½å¸è¡€/ç§»é€Ÿ'},
    {en:'Blade Waltz',         tw:'åŠèˆ',           tier:'prismatic', note:'ç„¡ç›®æ¨™é€£æ–¬ä¸¦çŸ­æš«ç„¡æ•µ'},
    {en:'Dashing',             tw:'ç¸±èºå°ˆç²¾',       tier:'prismatic', note:'æ‰€æœ‰ä½ç§»é¡æŠ€èƒ½ +175AH'},
    {en:"Can't Touch This",    tw:'åˆ¥ç¢°æˆ‘',         tier:'prismatic', note:'æ”¾å¤§ç² 2 ç§’ç„¡æ•µ'},
    {en:'Glass Cannon',        tw:'ç»ç’ƒå¤§ç ²',       tier:'prismatic', note:'-30% æœ€å¤§ HPï¼›+12% çœŸå‚·'},
    {en:'Giant Slayer',        tw:'å·¨äººæ®ºæ‰‹',       tier:'prismatic', note:'è®Šå°åŠ é€Ÿï¼›å°å¤§å‹æ•µäººå¢å‚·'},
    {en:'Courage of the Colossus', tw:'å·¨åƒä¹‹å‹‡',  tier:'prismatic', note:'å®šèº«å¾Œç²å¤§è­·ç›¾'},
    {en:'Goliath',             tw:'å·¨éˆåŒ–èº«',       tier:'prismatic', note:'+é«”å‹ +HP +è‡ªé©æ‡‰åŠ›'},
    {en:'Protein Shake',       tw:'è›‹ç™½å¥¶æ˜”',       tier:'prismatic', note:'æ²»ç™’ä¾é›™æŠ—æå‡'},
    {en:'Omni Soul',           tw:'è¬é­‚åŠ æŒ',       tier:'prismatic', note:'ä¸€æ¬¡ç²å¾— 3 å€‹éš¨æ©Ÿé¾é­‚'},
    {en:"Windspeaker's Blessing", tw:'é¢¨èªè€…ç¥ç¦', tier:'prismatic', note:'æ²»/ç›¾åŒæ™‚çµ¦é›™æŠ—ï¼ˆç¯„åœï¼‰'},
    {en:'Dual Wield',          tw:'é›™æŒå°„æ“Š',       tier:'prismatic', note:'æ™®æ”»è¿½åŠ ç¬¬äºŒç™¼ï¼ˆ40% on-hitï¼‰'},
    {en:'Fan the Hammer',      tw:'é€£è½Ÿæ‰³æ©Ÿ',       tier:'prismatic', note:'æ™®æ”»å‘å››æ–¹å†ç™¼ 5 ç™¼'},
    {en:'Goldrend',            tw:'æ·˜é‡‘è€…',         tier:'prismatic', note:'å‘½ä¸­çµ¦ç§»é€Ÿèˆ‡é‡‘å¹£ï¼ˆå°åŒä¸€äººæœ‰ CDï¼‰'}
  ];

  // ===== æ–¹æ¡ˆï¼ˆæ–°å¢ fighterï¼›ä¸¦åŠ å…¥ç©©å¥å›é€€ï¼‰ =====
  const ROLE_PLANS = {
    mage: [
      { label:'Round 1ï¼ˆå»ºè­°ï¼šéŠ€ï¼‰',  picks:[ 'ADAPt','Witchful Thinking','Frost Wraith' ] },
      { label:'Round 2ï¼ˆå»ºè­°ï¼šé‡‘ï¼‰',  picks:[ 'Magic Missile','Recursion','With Haste' ] },
      { label:'Round 3ï¼ˆé‡‘ / æ£±å½©ï¼‰', picks:[ 'Jeweled Gauntlet','Infernal Conduit','Ultimate Awakening' ] },
      { label:'Round 4ï¼ˆæ£±å½©ï¼‰',      picks:[ 'Quantum Computing','Back to Basics','Final Form' ] },
    ],
    assassin: [
      { label:'Round 1ï¼ˆå»ºè­°ï¼šéŠ€ï¼‰',  picks:[ 'Shadow Runner','Swift and Safe','The Brutalizer' ] },
      { label:'Round 2ï¼ˆå»ºè­°ï¼šé‡‘ï¼‰',  picks:[ 'Flashy','Executioner',"It's Killing Time" ] },
      { label:'Round 3ï¼ˆé‡‘ / æ£±å½©ï¼‰', picks:[ 'Blade Waltz','Dashing','Final Form' ] },
      { label:'Round 4ï¼ˆæ£±å½©ï¼‰',      picks:[ "Can't Touch This",'Glass Cannon','Giant Slayer' ] },
    ],
    tank: [
      { label:'Round 1ï¼ˆå»ºè­°ï¼šéŠ€ï¼‰',  picks:[ 'Adamant','Tank It or Leave It','Mighty Shield' ] },
      { label:'Round 2ï¼ˆå»ºè­°ï¼šé‡‘ï¼‰',  picks:[ 'Perseverance',"Dawnbringer's Resolve",'Tank Engine' ] },
      { label:'Round 3ï¼ˆé‡‘ / æ£±å½©ï¼‰', picks:[ 'Courage of the Colossus','Goliath','Protein Shake' ] },
      { label:'Round 4ï¼ˆæ£±å½©ï¼‰',      picks:[ 'Back to Basics','Omni Soul','Final Form' ] },
    ],
    adc: [
      { label:'Round 1ï¼ˆå»ºè­°ï¼šéŠ€ï¼‰',  picks:[ 'Deft','Scoped Weapons','Typhoon' ] },
      { label:'Round 2ï¼ˆå»ºè­°ï¼šé‡‘ï¼‰',  picks:[ 'Critical Rhythm',"It's Critical",'Thread the Needle' ] },
      { label:'Round 3ï¼ˆé‡‘ / æ£±å½©ï¼‰', picks:[ 'Dual Wield','Fan the Hammer','Goldrend' ] },
      { label:'Round 4ï¼ˆæ£±å½©ï¼‰',      picks:[ 'Giant Slayer','Glass Cannon','Final Form' ] },
    ],
    support: [
      { label:'Round 1ï¼ˆå»ºè­°ï¼šéŠ€ï¼‰',  picks:[ 'First Aid Kit','Virtuous Cycle','Sonic Boom' ] },
      { label:'Round 2ï¼ˆå»ºè­°ï¼šé‡‘ï¼‰',  picks:[ 'All for You','Holy Fire','Keystone Conjurer' ] },
      { label:'Round 3ï¼ˆé‡‘ / æ£±å½©ï¼‰', picks:[ 'Empyrean Promise','Divine Intervention',"Windspeaker's Blessing" ] },
      { label:'Round 4ï¼ˆæ£±å½©ï¼‰',      picks:[ "Windspeaker's Blessing",'Final Form','Omni Soul' ] },
    ],
    // ğŸ”¥ æ–°å¢ï¼šé¬¥å£«ï¼ˆFighterï¼‰
    fighter: [
      { label:'Round 1ï¼ˆå»ºè­°ï¼šéŠ€ï¼‰',  picks:[ 'Adamant','The Brutalizer','Mighty Shield' ] },
      { label:'Round 2ï¼ˆå»ºè­°ï¼šé‡‘ï¼‰',  picks:[ 'Perseverance','Executioner','Tank Engine' ] },
      { label:'Round 3ï¼ˆé‡‘ / æ£±å½©ï¼‰', picks:[ 'Courage of the Colossus','Goliath','Final Form' ] },
      { label:'Round 4ï¼ˆæ£±å½©ï¼‰',      picks:[ 'Back to Basics','Omni Soul','Final Form' ] },
    ],
  };

  // ===== ç‹€æ…‹ =====
  const state = {
    role:'mage',
    heroKey:null, heroNameTw:'â€”',
    version:null, champions:[]
  };

  // ===== DOM =====
  const $roleList  = document.getElementById('roleList');
  const $search    = document.getElementById('search');
  const $heroGrid  = document.getElementById('heroGrid');
  const $title     = document.getElementById('currentPlanTitle');
  const $rounds    = document.getElementById('rounds');
  const $copyBtn   = document.getElementById('copyBtn');
  const $exportBtn = document.getElementById('exportBtn');

  // ===== åœ–ç¤ºè·¯å¾‘èˆ‡ Fallback =====
  function deriveOpggName(imageFull){
    let base = (imageFull||'').replace(/\.png$/i,'');
    const map = {
      'Chogath':'Chogath','Velkoz':'Velkoz','Leblanc':'Leblanc','Kaisa':'Kaisa','Khazix':'Khazix',
      'KogMaw':'KogMaw','KSante':'KSante','Belveth':'Belveth','Nunu':'Nunu','Wukong':'Wukong',
      'Renata':'Renata','JarvanIV':'JarvanIV','DrMundo':'DrMundo','MissFortune':'MissFortune','MonkeyKing':'Wukong'
    };
    return map[base] || base;
  }
  const opggPrimary = (name) => `https://opgg-static.akamaized.net/meta/images/lol/champion/${name}.png`;
  const opggAlt     = (name) => `https://opgg-static.akamaized.net/images/lol/champion/${name}.png`;
  const ddragonIcon = (ver, full) => `https://ddragon.leagueoflegends.com/cdn/${ver}/img/champion/${full}`;

  // ===== è¼‰å…¥è‹±é›„ï¼ˆDDragonï¼‰ =====
  async function loadChampions(){
    try{
      const ver = await fetch('https://ddragon.leagueoflegends.com/api/versions.json').then(r=>r.json()).then(a=>a[0]);
      state.version = ver;
      const data = await fetch(`https://ddragon.leagueoflegends.com/cdn/${ver}/data/zh_TW/champion.json`).then(r=>r.json());
      const champs = Object.values(data.data);
      state.champions = champs.map(c=>{
        const role = TAG2ROLE[c.tags?.[0]] || 'fighter';
        const op = deriveOpggName(c.image.full);
        return {
          key: c.id, en: c.id, tw: c.name, role, tags: c.tags||[],
          icons: [opggPrimary(op), opggAlt(op), ddragonIcon(ver, c.image.full)]
        };
      }).sort((a,b)=> a.tw.localeCompare(b.tw,'zh-Hant'));

      // é è¨­è‹±é›„ï¼šè‹¥ç¬¬ä¸€å€‹æ˜¯ Fighterï¼Œä¹Ÿèƒ½é¡¯ç¤ºï¼ˆå·²è£œæ–¹æ¡ˆï¼‰
      if(!state.heroKey){ state.heroKey = state.champions[0].key; state.heroNameTw = state.champions[0].tw; }
      renderAll();
    }catch(e){
      console.warn('è¼‰å…¥è‹±é›„å¤±æ•—ï¼Œæ”¹ä»¥æœ¬åœ°é è¨­æ–¹æ¡ˆé¡¯ç¤ºã€‚', e);
      renderAll(); // ä»é¡¯ç¤ºé è¨­ mage æ–¹æ¡ˆ
    }
  }

  // ===== å·¥å…· =====
  function findAug(en){ return AUGMENTS.find(a=>a.en===en) || {en, tw: en, tier:'silver', note:''}; }
  function showName(en, tw){ return OFFICIAL_TW[en] || tw; }
  function tierBadge(t){
    if(t==='gold') return '<span class="badge gold">GOLD</span>';
    if(t==='prismatic') return '<span class="badge prismatic">PRISMATIC</span>';
    return '<span class="badge silver">SILVER</span>';
  }
  function tierGroupBadge(tiers){
    const order = ['silver','gold','prismatic'];
    const uniq = Array.from(new Set(tiers)).sort((a,b)=> order.indexOf(a)-order.indexOf(b));
    return uniq.map(t=>tierBadge(t)).join(' ');
  }

  function getRoleForCurrentHero(){
    const hero = state.champions.find(x=>x.key===state.heroKey);
    let derived = hero ? (TAG2ROLE[hero.tags?.[0]] || 'fighter') : state.role;
    if(!ROLE_PLANS[derived]) derived = state.role;        // å…ˆç”¨å·¦å´é¸æ“‡
    if(!ROLE_PLANS[derived]) derived = 'mage';            // æœ€çµ‚ä¿éšªï¼šæ³•å¸«
    return { role: derived, heroName: hero ? hero.tw : state.heroNameTw };
  }

  // ===== æ¸²æŸ“ =====
  function renderRoles(){
    // å›ºå®šäº”é¡ + fighterï¼ˆå…±å…­é¡†ï¼‰
    const order = ['mage','assassin','tank','adc','support','fighter'];
    document.getElementById('roleList').innerHTML = order.map(key=>{
      const active = state.role===key;
      return `<button class="role-chip ${active?'active':''}" data-role="${key}"><div style="font-weight:700">${ROLE_META[key].label}</div></button>`;
    }).join('');
    document.querySelectorAll('[data-role]').forEach(btn=>{
      btn.addEventListener('click', ()=>{ state.role = btn.getAttribute('data-role'); renderAll(); });
    });
  }

  function buildHeroCard(h){
    const [icon1, icon2, fallback] = h.icons;
    const onerr = `if(this.dataset.step!=='1'){this.dataset.step='1';this.src='${icon2}'}else{this.src='${fallback}'}`;
    return `
      <button class="hero" data-hero="${h.key}">
        <img loading="lazy" alt="${h.tw} / ${h.en}" src="${icon1}" onerror="${onerr}"/>
        <div class="nm">${h.tw}</div>
        <div class="en">${h.en}</div>
      </button>
    `;
  }

  function renderHeroes(){
    const q = (document.getElementById('search').value||'').trim().toLowerCase();
    const list = state.champions.filter(c=> !q || c.tw.toLowerCase().includes(q) || c.en.toLowerCase().includes(q));
    const html = list.map(buildHeroCard).join('');
    document.getElementById('heroGrid').innerHTML = html || '<div class="tip">ï¼ˆå°šæœªè¼‰å…¥è‹±é›„æˆ–æ²’æœ‰ç¬¦åˆçš„æœå°‹çµæœï¼‰</div>';
    document.querySelectorAll('[data-hero]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.getAttribute('data-hero');
        const obj = state.champions.find(x=>x.key===key);
        if(!obj) return;
        state.heroKey = obj.key; state.heroNameTw = obj.tw; state.role = TAG2ROLE[obj.tags?.[0]] || 'fighter';
        renderAll();
      });
    });
  }

  function renderPlan(){
    const { role, heroName } = getRoleForCurrentHero();
    const flow = ROLE_PLANS[role];
    document.getElementById('currentPlanTitle').textContent = `${ROLE_META[role].label}ï½œ${heroName || 'â€”'}`;

    const roundsHtml = flow.map(round=>{
      const picks = round.picks.map(en => findAug(en));
      const tiers = picks.map(p=>p.tier);
      const headerBadges = tierGroupBadge(tiers);

      const items = picks.map(a=>{
        const nameZh = showName(a.en, a.tw);
        const note = a.note && a.note.trim() ? a.note : 'â€” æš«ç„¡ä¸­æ–‡ç°¡è¿° â€”';
        return `
          <div class="pick">
            <div class="head">
              <div class="tt"><span class="tw">${nameZh}</span><div class="ttip">${a.en}</div></div>
              ${tierBadge(a.tier)}
            </div>
            <div class="tip">${note}</div>
          </div>`;
      }).join('');

      return `
        <div class="card pad round-card">
          <div class="row" style="margin-bottom:8px">
            <div class="section-title">${round.label}</div>
            <div>${headerBadges}</div>
          </div>
          <div class="picks">${items}</div>
        </div>`;
    }).join('');

    document.getElementById('rounds').innerHTML = roundsHtml;
  }

  function copyPlan(){
    const { role, heroName } = getRoleForCurrentHero();
    const plan = ROLE_PLANS[role];
    const lines = [];
    lines.push(`ã€${ROLE_META[role].label}ï½œ${heroName||'â€”'}ã€‘ARAM Mayhem æ¨è–¦å¢å¹…ï¼ˆå›ºå®šé †åºï¼‰`);
    plan.forEach(r=>{
      lines.push(`- ${r.label}ï¼š` + r.picks.map(en=>{ const a=findAug(en); return `${showName(a.en,a.tw)}(${a.en})`; }).join(' / '));
    });
    lines.push('â€” åç¨±ä»¥å°ç‰ˆå¸¸è¦‹è­¯åç‚ºæº–ï¼›å¯¦æˆ°ä»¥å®¢æˆ¶ç«¯é¡¯ç¤ºç‚ºæœ€çµ‚');
    navigator.clipboard.writeText(lines.join('\n'));
    document.getElementById('copyBtn').textContent='å·²è¤‡è£½';
    setTimeout(()=>document.getElementById('copyBtn').textContent='è¤‡è£½ç•¶å‰æ–¹æ¡ˆ',1200);
  }

  function exportJSON(){
    const blob = new Blob([JSON.stringify({version:state.version, champions:state.champions, augments:AUGMENTS, officialTW:OFFICIAL_TW}, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href = url; a.download = 'aram-mayhem-full.tw.json'; a.click(); URL.revokeObjectURL(url);
  }

  function renderAll(){ renderRoles(); renderHeroes(); renderPlan(); }

  // âœ… å…ˆæ¸²æŸ“é è¨­æ–¹æ¡ˆï¼Œç¢ºä¿å°±ç®—ç¶²è·¯å¤±æ•—ä¹Ÿçœ‹å¾—åˆ°å¢å¹…
  renderAll();

  // ç¶äº‹ä»¶
  document.getElementById('copyBtn').addEventListener('click', copyPlan);
  document.getElementById('exportBtn').addEventListener('click', exportJSON);
  document.getElementById('search').addEventListener('input', renderHeroes);

  // å†å»è¼‰å…¥è‹±é›„è³‡æ–™ï¼ˆæˆåŠŸæœƒæ›´æ–°å·¦å´æ¸…å–®èˆ‡æ¨™é¡Œï¼Œä½†å³å´å¢å¹…å§‹çµ‚å¯è¦‹ï¼‰
  loadChampions();
  </script>
</body>
</html>
